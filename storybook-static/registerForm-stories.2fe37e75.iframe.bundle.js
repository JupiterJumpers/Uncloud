"use strict";(self.webpackChunkjupiter_jumpers=self.webpackChunkjupiter_jumpers||[]).push([[506],{"./stories/registerForm.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Form:()=>Form,__namedExportsOrder:()=>__namedExportsOrder,default:()=>registerForm_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),firebase=__webpack_require__("./app/firebase.tsx"),index_esm=__webpack_require__("./node_modules/firebase/auth/dist/esm/index.esm.js"),next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),navigation=__webpack_require__("./node_modules/next/navigation.js"),customInput=__webpack_require__("./stories/customInput.tsx"),passwordInput=__webpack_require__("./stories/passwordInput.tsx"),Button=__webpack_require__("./stories/Button.tsx"),esm_index_esm=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js"),Icons=__webpack_require__("./stories/Icons.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");const RegisterForm=()=>{const[registerData,setRegisterData]=(0,react.useState)({displayName:"",emailAddress:"",password:""}),[error,setError]=(0,react.useState)(null),[errorField,setErrorField]=(0,react.useState)({displayName:"",emailAddress:"",password:""}),router=(0,navigation.useRouter)(),validateField=(name,value)=>{let errorMessage="";return value.trim()?"displayName"===name&&value.length>20?errorMessage="Name must be less than 20 characters":"emailAddress"!==name||/\S+@\S+\.\S+/.test(value)?"password"===name&&value.length<8&&(errorMessage="For added security, passwords must be at least 8 characters long. Let's give it another try"):errorMessage="This email is invalid":errorMessage="This field is required",errorMessage},handleChange=e=>{const{name,value}=e.target,errorMessage=validateField(name,value);setErrorField((prevErrors=>({...prevErrors,[name]:errorMessage}))),setRegisterData((prevState=>({...prevState,[name]:value})))};return(0,jsx_runtime.jsxs)("div",{className:" flex h-full w-full max-w-[24rem] flex-col space-y-6 bg-backgroundSecondary p-4 py-6",children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 ",children:[(0,jsx_runtime.jsx)(Icons.I,{type:"cloud-sun",size:"6rem",weight:"regular"}),(0,jsx_runtime.jsxs)("div",{className:"flex  w-full flex-col items-center justify-center gap-2  space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"text-3xl font-semibold",children:"Welcome to Uncloud"}),(0,jsx_runtime.jsx)("div",{className:"text-center text-base font-light",children:"Add an email address, name, and password to complete your account."})]})]}),(0,jsx_runtime.jsxs)("form",{onSubmit:e=>{e.preventDefault(),setError(null);const{emailAddress,password,displayName}=registerData,errors={displayName:validateField("displayName",(formData=registerData).displayName),emailAddress:validateField("emailAddress",formData.emailAddress),password:validateField("password",formData.password)};var formData;Object.values(errors).some((error=>error))?setErrorField(errors):(0,index_esm.eJ)(firebase.j,emailAddress,password).then((authUser=>{authUser.user&&(0,index_esm.r7)(authUser.user,{displayName}).then((()=>{(0,esm_index_esm.BN)((0,esm_index_esm.H9)(firebase.db,"authUsers",authUser.user.uid),{email:emailAddress,displayName,closedConfirmationMessage:!1}).then((docRef=>{router.push("/")})).catch((e=>{console.error("Error updating document",e)}))})).catch((error=>{console.error("Error updating user display name:",error)}))})).catch((error=>{console.error(error.message),setError("This email is already registered")}))},className:"flex flex-col gap-6",children:[(0,jsx_runtime.jsx)(customInput.A,{type:"email",placeholder:"Please type your email",name:"emailAddress",value:registerData.emailAddress,label:"Email",handleChange,error:errorField.emailAddress}),(0,jsx_runtime.jsx)(customInput.A,{type:"text",placeholder:"Please type your preferred name",value:registerData.displayName,name:"displayName",label:"What should we call you?",handleChange,error:errorField.displayName}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)(passwordInput.A,{type:"password",placeholder:"Please type in your password",name:"password",value:registerData.password,label:"Password",handleChange,error:errorField.password}),!errorField.password&&(0,jsx_runtime.jsx)("div",{className:"text-sm font-semibold",children:"Passwords need to have at least 8 characters."})]}),error&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-red-600",children:error}),(0,jsx_runtime.jsxs)("div",{className:"space-y-16",children:[(0,jsx_runtime.jsx)(Button.$,{type:"submit",label:"Sign up",primary:!0}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-center text-base font-semibold",children:["Already have an account?Â "," ",(0,jsx_runtime.jsx)(link_default(),{href:"/auth/login",className:"font-medium text-blue-500 underline",children:"Log in here."})," "]})]})]})]})},registerForm=RegisterForm;var _Form_parameters,_Form_parameters_docs,_Form_parameters1;RegisterForm.__docgenInfo={description:"",methods:[],displayName:"RegisterForm"};const registerForm_stories={title:"Registration Form",component:registerForm,parameters:{nextjs:{appDirectory:!0},backgrounds:{default:"dark"}},tags:["autodocs"]},Form={};Form.parameters={...Form.parameters,docs:{...null===(_Form_parameters=Form.parameters)||void 0===_Form_parameters?void 0:_Form_parameters.docs,source:{originalSource:"{}",...null===(_Form_parameters1=Form.parameters)||void 0===_Form_parameters1||null===(_Form_parameters_docs=_Form_parameters1.docs)||void 0===_Form_parameters_docs?void 0:_Form_parameters_docs.source}}};const __namedExportsOrder=["Form"]}}]);